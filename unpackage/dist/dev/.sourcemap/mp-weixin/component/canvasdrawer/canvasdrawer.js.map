{"version":3,"sources":["webpack:////Users/bing/lhbWordMiniProgram_uni/component/canvasdrawer/canvasdrawer.vue?30ea","webpack:////Users/bing/lhbWordMiniProgram_uni/component/canvasdrawer/canvasdrawer.vue?a752","webpack:////Users/bing/lhbWordMiniProgram_uni/component/canvasdrawer/canvasdrawer.vue?9d9a","webpack:////Users/bing/lhbWordMiniProgram_uni/component/canvasdrawer/canvasdrawer.vue?34db","webpack:////Users/bing/lhbWordMiniProgram_uni/component/canvasdrawer/canvasdrawer.vue","webpack:////Users/bing/lhbWordMiniProgram_uni/component/canvasdrawer/canvasdrawer.vue?ac3a","webpack:////Users/bing/lhbWordMiniProgram_uni/component/canvasdrawer/canvasdrawer.vue?8cd8"],"names":["data","showCanvas","width","height","tempFileList","isPainting","components","props","painting","type","Object","default","view","watch","handler","newVal","oldVal","JSON","stringify","setData","readyPigment","mode","$emit","errMsg","deep","ctx","cache","mounted","wx","removeStorageSync","getStorageSync","createCanvasContext","methods","views","inter","setInterval","clearInterval","clearActions","save","getImagesInfo","imageList","i","length","push","getImageInfo","url","loadTask","Promise","resolve","reject","all","splice","then","res","catch","Math","ceil","concat","startPainting","console","log","imageIndex","drawImage","measureText","showModal","title","content","drawText","drawRect","drawCircle","draw","setStorageSync","system","getSystemInfoSync","test","saveImageToLocal","setTimeout","params","top","left","borderRadius","deg","beginPath","arc","PI","fill","clip","translate","rotate","restore","MaxLineNumber","breakWord","color","fontSize","lineHeight","textAlign","bolder","textDecoration","setTextBaseline","setTextAlign","setFillStyle","setFontSize","fillText","drawTextLine","fillTop","lineNum","substring","background","radius","moveTo","lineTo","closePath","fillRect","centerX","centerY","r","start","end","direction","lineWidth","strokeStyle","lineCap","stroke","objExp","RegExp","src","complete","path","Error","canvasToTempFilePath","x","y","canvasId","tempFilePath"],"mappings":"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","file":"component/canvasdrawer/canvasdrawer.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./canvasdrawer.vue?vue&type=template&id=6b6263c6&\"\nvar renderjs\nimport script from \"./canvasdrawer.vue?vue&type=script&lang=js&\"\nexport * from \"./canvasdrawer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./canvasdrawer.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/bing/lhbWordMiniProgram_uni/component/canvasdrawer/canvasdrawer.vue\"\nexport default component.exports","export * from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./canvasdrawer.vue?vue&type=template&id=6b6263c6&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./canvasdrawer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./canvasdrawer.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n\n\nexport default {\n  data() {\n    return {\n      showCanvas: false,\n      width: 100,\n      height: 100,\n      tempFileList: [],\n      isPainting: false\n    };\n  },\n\n  components: {},\n  props: {\n    painting: {\n      type: Object,\n      default: () => ({\n        view: []\n      })\n    }\n  },\n  watch: {\n    painting: {\n      handler: function (newVal, oldVal) {\n        if (!this.isPainting) {\n          if (JSON.stringify(newVal) !== JSON.stringify(oldVal)) {\n            if (newVal && newVal.width && newVal.height) {\n              this.setData({\n                showCanvas: true,\n                isPainting: true\n              });\n              this.readyPigment();\n            }\n          } else {\n            if (newVal && newVal.mode !== 'same') {\n              this.$emit('getImage', {\n                errMsg: 'canvasdrawer:samme params'\n              });\n            }\n          }\n        }\n      },\n      deep: true\n    }\n  },\n  ctx: null,\n  cache: {},\n\n  mounted() {\n    wx.removeStorageSync('canvasdrawer_pic_cache');\n    this.cache = wx.getStorageSync('canvasdrawer_pic_cache') || {};\n    this.ctx = wx.createCanvasContext('canvasdrawer', this);\n  },\n\n  methods: {\n    readyPigment() {\n      const {\n        width,\n        height,\n        views\n      } = this.painting;\n      this.setData({\n        width,\n        height\n      });\n      const inter = setInterval(() => {\n        if (this.ctx) {\n          clearInterval(inter);\n          this.ctx.clearActions();\n          this.ctx.save();\n          this.getImagesInfo(views);\n        }\n      }, 100);\n    },\n\n    getImagesInfo(views) {\n      const imageList = [];\n\n      for (let i = 0; i < views.length; i++) {\n        if (views[i].type === 'image') {\n          imageList.push(this.getImageInfo(views[i].url));\n        }\n      }\n\n      const loadTask = [];\n\n      for (let i = 0; i < Math.ceil(imageList.length / 8); i++) {\n        loadTask.push(new Promise((resolve, reject) => {\n          Promise.all(imageList.splice(i * 8, 8)).then(res => {\n            resolve(res);\n          }).catch(res => {\n            reject(res);\n          });\n        }));\n      }\n\n      Promise.all(loadTask).then(res => {\n        let tempFileList = [];\n\n        for (let i = 0; i < res.length; i++) {\n          tempFileList = tempFileList.concat(res[i]);\n        }\n\n        this.setData({\n          tempFileList\n        });\n        this.startPainting();\n      });\n    },\n\n    startPainting() {\n      const {\n        tempFileList,\n        painting: {\n          views\n        }\n      } = this;\n      console.log(tempFileList);\n\n      for (let i = 0, imageIndex = 0; i < views.length; i++) {\n        if (views[i].type === 'image') {\n          this.drawImage({ ...views[i],\n            url: tempFileList[imageIndex]\n          });\n          imageIndex++;\n        } else if (views[i].type === 'text') {\n          if (!this.ctx.measureText) {\n            wx.showModal({\n              title: '提示',\n              content: '当前微信版本过低，无法使用 measureText 功能，请升级到最新微信版本后重试。'\n            });\n            this.$emit('getImage', {\n              errMsg: 'canvasdrawer:version too low'\n            });\n            return;\n          } else {\n            this.drawText(views[i]);\n          }\n        } else if (views[i].type === 'rect') {\n          this.drawRect(views[i]);\n        } else if (views[i].type === 'circle') {\n          this.drawCircle(views[i]);\n        }\n      }\n\n      this.ctx.draw(false, () => {\n        wx.setStorageSync('canvasdrawer_pic_cache', this.cache);\n        const system = wx.getSystemInfoSync().system;\n\n        if (/ios/i.test(system)) {\n          this.saveImageToLocal();\n        } else {\n          // 延迟保存图片，解决安卓生成图片错位bug。\n          setTimeout(() => {\n            this.saveImageToLocal();\n          }, 800);\n        }\n      });\n    },\n\n    drawImage(params) {\n      this.ctx.save();\n      const {\n        url,\n        top = 0,\n        left = 0,\n        width = 0,\n        height = 0,\n        borderRadius = 0,\n        deg = 0\n      } = params;\n\n      if (borderRadius) {\n        this.ctx.beginPath();\n        this.ctx.arc(left + borderRadius, top + borderRadius, borderRadius, 0, 2 * Math.PI);\n        this.ctx.fill();\n        this.ctx.clip();\n        this.ctx.drawImage(url, left, top, width, height);\n      } else {\n        if (deg !== 0) {\n          this.ctx.translate(left + width / 2, top + height / 2);\n          this.ctx.rotate(deg * Math.PI / 180);\n          this.ctx.drawImage(url, -width / 2, -height / 2, width, height);\n        } else {\n          this.ctx.drawImage(url, left, top, width, height);\n        }\n      }\n\n      this.ctx.restore();\n    },\n\n    drawText(params) {\n      this.ctx.save();\n      const {\n        MaxLineNumber = 2,\n        breakWord = false,\n        color = 'black',\n        content = '',\n        fontSize = 16,\n        top = 0,\n        left = 0,\n        lineHeight = 20,\n        textAlign = 'left',\n        width,\n        bolder = false,\n        textDecoration = 'none'\n      } = params;\n      this.ctx.beginPath();\n      this.ctx.setTextBaseline('top');\n      this.ctx.setTextAlign(textAlign);\n      this.ctx.setFillStyle(color);\n      this.ctx.setFontSize(fontSize);\n\n      if (!breakWord) {\n        this.ctx.fillText(content, left, top);\n        this.drawTextLine(left, top, textDecoration, color, fontSize, content);\n      } else {\n        let fillText = '';\n        let fillTop = top;\n        let lineNum = 1;\n\n        for (let i = 0; i < content.length; i++) {\n          fillText += [content[i]];\n\n          if (this.ctx.measureText(fillText).width > width) {\n            if (lineNum === MaxLineNumber) {\n              if (i !== content.length) {\n                fillText = fillText.substring(0, fillText.length - 1) + '...';\n                this.ctx.fillText(fillText, left, fillTop);\n                this.drawTextLine(left, fillTop, textDecoration, color, fontSize, fillText);\n                fillText = '';\n                break;\n              }\n            }\n\n            this.ctx.fillText(fillText, left, fillTop);\n            this.drawTextLine(left, fillTop, textDecoration, color, fontSize, fillText);\n            fillText = '';\n            fillTop += lineHeight;\n            lineNum++;\n          }\n        }\n\n        this.ctx.fillText(fillText, left, fillTop);\n        this.drawTextLine(left, fillTop, textDecoration, color, fontSize, fillText);\n      }\n\n      this.ctx.restore();\n\n      if (bolder) {\n        this.drawText({ ...params,\n          left: left + 0.3,\n          top: top + 0.3,\n          bolder: false,\n          textDecoration: 'none'\n        });\n      }\n    },\n\n    drawTextLine(left, top, textDecoration, color, fontSize, content) {\n      if (textDecoration === 'underline') {\n        this.drawRect({\n          background: color,\n          top: top + fontSize * 1.2,\n          left: left - 1,\n          width: this.ctx.measureText(content).width + 3,\n          height: 1\n        });\n      } else if (textDecoration === 'line-through') {\n        this.drawRect({\n          background: color,\n          top: top + fontSize * 0.6,\n          left: left - 1,\n          width: this.ctx.measureText(content).width + 3,\n          height: 1\n        });\n      }\n    },\n\n    // drawRect (params) {\n    //   this.ctx.save()\n    //   const { background, top = 0, left = 0, width = 0, height = 0 } = params\n    //   this.ctx.setFillStyle(background)\n    //   this.ctx.fillRect(left, top, width, height)\n    //   this.ctx.restore()\n    // },\n    //新加代码绘制圆开始\n    drawRect(params) {\n      this.ctx.save();\n      const {\n        background,\n        top = 0,\n        left = 0,\n        width = 0,\n        height = 0,\n        radius = 0\n      } = params;\n      this.ctx.setFillStyle(background);\n\n      if (radius) {\n        // 开始绘制 \n        this.ctx.beginPath(); // 左上角 \n\n        this.ctx.arc(left + radius, top + radius, radius, Math.PI, Math.PI * 1.5); // border-top \n\n        this.ctx.moveTo(left + radius, top);\n        this.ctx.lineTo(left + width - radius, top);\n        this.ctx.lineTo(left + width, top + radius); // 右上角 \n\n        this.ctx.arc(left + width - radius, top + radius, radius, Math.PI * 1.5, Math.PI * 2); // border-right \n\n        this.ctx.lineTo(left + width, top + height - radius);\n        this.ctx.lineTo(left + width - radius, top + height); // 右下角 \n\n        this.ctx.arc(left + width - radius, top + height - radius, radius, 0, Math.PI * 0.5); // border-bottom \n\n        this.ctx.lineTo(left + radius, top + height);\n        this.ctx.lineTo(left, top + height - radius); // 左下角 \n\n        this.ctx.arc(left + radius, top + height - radius, radius, Math.PI * 0.5, Math.PI); // border-left \n\n        this.ctx.lineTo(left, top + radius);\n        this.ctx.lineTo(left + radius, top); // 这里是使用 fill 还是 stroke都可以，二选一即可，但是需要与上面对应 \n\n        this.ctx.fill();\n        this.ctx.closePath();\n      } else {\n        this.ctx.fillRect(left, top, width, height);\n      }\n\n      this.ctx.restore();\n    },\n\n    //新加代码绘制圆结束\n    drawCircle(params) {\n      this.ctx.save();\n      const {\n        centerX = 0,\n        centerY = 0,\n        r = 100,\n        start = -Math.PI / 2,\n        end,\n        background,\n        direction = false,\n        lineWidth = 15\n      } = params;\n      this.ctx.setFillStyle(background);\n      console.log(end);\n      this.ctx.strokeStyle = background; //设置描边样式\n\n      this.ctx.lineWidth = lineWidth; //设置线宽\n\n      this.ctx.beginPath(); //路径开始\n\n      this.ctx.arc(centerX, centerY, r, start, -Math.PI / 2 + end * Math.PI * 2 / 100, direction); //用于绘制圆弧context.arc(x坐标，y坐标，半径，起始角度，终止角度，顺时针/逆时针)\n\n      if (end == 0) return;\n      this.ctx.lineCap = \"round\";\n      this.ctx.stroke(); //绘制\n\n      this.ctx.closePath(); //路径结束\n\n      this.ctx.restore();\n    },\n\n    getImageInfo(url) {\n      return new Promise((resolve, reject) => {\n        if (this.cache[url]) {\n          resolve(this.cache[url]);\n        } else {\n          const objExp = new RegExp(/^http(s)?:\\/\\/([\\w-]+\\.)+[\\w-]+(\\/[\\w- .\\/?%&=]*)?/);\n\n          if (objExp.test(url)) {\n            wx.getImageInfo({\n              src: url,\n              complete: res => {\n                if (res.errMsg === 'getImageInfo:ok') {\n                  this.cache[url] = res.path;\n                  resolve(res.path);\n                } else {\n                  this.$emit('getImage', {\n                    errMsg: 'canvasdrawer:download fail'\n                  });\n                  reject(new Error('getImageInfo fail'));\n                }\n              }\n            });\n          } else {\n            this.cache[url] = url;\n            resolve(url);\n          }\n        }\n      });\n    },\n\n    saveImageToLocal() {\n      const {\n        width,\n        height\n      } = this;\n      wx.canvasToTempFilePath({\n        x: 0,\n        y: 0,\n        width,\n        height,\n        canvasId: 'canvasdrawer',\n        complete: res => {\n          if (res.errMsg === 'canvasToTempFilePath:ok') {\n            this.setData({\n              showCanvas: false,\n              isPainting: false,\n              tempFileList: []\n            });\n            this.$emit('getImage', {\n              tempFilePath: res.tempFilePath,\n              errMsg: 'canvasdrawer:ok'\n            });\n          } else {\n            this.$emit('getImage', {\n              errMsg: 'canvasdrawer:fail'\n            });\n          }\n        }\n      }, this);\n    }\n\n  }\n};\n","import mod from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./canvasdrawer.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./canvasdrawer.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588235897910\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}