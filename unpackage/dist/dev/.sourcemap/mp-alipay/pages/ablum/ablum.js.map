{"version":3,"sources":["webpack:////Users/bing/lhbWordMiniProgram_uni/main.js","webpack:////Users/bing/lhbWordMiniProgram_uni/pages/ablum/ablum.vue?13e6","webpack:////Users/bing/lhbWordMiniProgram_uni/pages/ablum/ablum.vue?7d1f","webpack:////Users/bing/lhbWordMiniProgram_uni/pages/ablum/ablum.vue?a033","webpack:////Users/bing/lhbWordMiniProgram_uni/pages/ablum/ablum.vue?61a6","webpack:////Users/bing/lhbWordMiniProgram_uni/pages/ablum/ablum.vue","webpack:////Users/bing/lhbWordMiniProgram_uni/pages/ablum/ablum.vue?f310","webpack:////Users/bing/lhbWordMiniProgram_uni/pages/ablum/ablum.vue?a7c4"],"names":["createPage","Page","util","require","app","getApp","globalData","listUrl","unitUrl","data","albums","is_oauth","win_height","g_win_height","coverHidden","playFloatHidden","playFloating","playFloatCover","muted","oauth_cfg","oauthTipName","oauthButtonName","nvabarData","showCapsule","title","selectId","videoPlaying","coverPlay","components","auth","navBar","props","onLoad","options","console","log","wx","showLoading","getSystemInfo","success","res","g_is_huawei","model","indexOf","g_audio_obj","getBackgroundAudioManager","onReady","oauthModal","selectComponent","videoContext","createVideoContext","onShow","that","bindplay","setData","hideLoading","dataLoad","g_has_index_toggle","stop","playRecord","getListenRecord","g_audio_playing","g_audio_cover_square","length","cover","screenResize","onHide","pause","onUnload","onShareAppMessage","path","methods","getRequest","e","showToast","icon","clickAblum","event","id","currentTarget","dataset","oauthFailEvent","bindOkEvent","onResize","goAlbum","g_is_login","switchTab","url","encodeURIComponent","idx","g_audio_ablum_temid","navigateTo","videoPlay","play","setTimeout","videoPause","lastState","nowState","lastTime","Date","now","startAccelerometer","onAccelerometerChange","Roll","Math","atan2","x","sqrt","y","z","Pitch","absPitch","abs","requestFullScreen","exitFullScreen","reqBookData","book_id","g_audio_pid","pid","g_audio_idx","g_audio_seeker","time","g_audio_bookid","map","reg","audio","JSON","parse","secret","media","media_iv","g_auth_msg","g_audio_auth","status","g_try_time","try_time","g_audio_plen","g_req_data","goDetail","tmp_id","audioManagerLister","onError","onPlay","onPause","onEnded","onStop"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;kDAAA,wCAAmB;AACnB;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AAC0M;AAC1M,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAqyB,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;kICAzzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,IAAI,GAAGC,mBAAO,CAAC,0BAAD,CAAlB;AACA,IAAMC,GAAG,GAAGC,MAAM,GAAGC,UAArB;AACA,IAAIC,OAAO,GAAG,yCAAd;AACA,IAAIC,OAAO,GAAG,yDAAd,C;;;;AAIe;AACbC,MADa,kBACN;AACL,WAAO;AACLC,YAAM,EAAE,EADH;AAELC,cAAQ,EAAE,IAFL;AAGLC,gBAAU,EAAEP,MAAM,GAAGC,UAAT,CAAoBO,YAH3B;AAILC,iBAAW,EAAE,KAJR;AAKLC,qBAAe,EAAE,IALZ;AAMLC,kBAAY,EAAE,KANT;AAOLC,oBAAc,EAAE,EAPX;AAQLC,WAAK,EAAE,KARF;AASL;AACAC,eAAS,EAAE;AACTC,oBAAY,EAAE,6BADL;AAETC,uBAAe,EAAE,IAFR,EAVN;;AAcLC,gBAAU,EAAE;AACVC,mBAAW,EAAE,CADH;AAEV;AACAC,aAAK,EAAE,QAHG,EAdP;;AAmBLC,cAAQ,EAAE,EAnBL;AAoBLC,kBAAY,EAAE,KApBT;AAqBLC,eAAS,EAAE,KArBN,EAAP;;AAuBD,GAzBY;;AA2BbC,YAAU,EAAE;AACVC,QAAI,EAAJA,IADU;AAEVC,UAAM,EAANA,MAFU,EA3BC;;AA+BbC,OAAK,EAAE,EA/BM;;AAiCb;;;AAGAC,QAAM,EAAE,gBAAUC,OAAV,EAAmB;AACzBC,WAAO,CAACC,GAAR,CAAY,QAAZ;AACAC,MAAE,CAACC,WAAH,CAAe;AACbb,WAAK,EAAE,QADM,EAAf;;AAGAY,MAAE,CAACE,aAAH,CAAiB;AACfC,aAAO,EAAE,iBAAUC,GAAV,EAAe;AACtBnC,cAAM,GAAGC,UAAT,CAAoBmC,WAApB,GAAkCD,GAAG,CAACE,KAAJ,CAAUC,OAAV,CAAkB,QAAlB,KAA+B,CAAC,CAAhC,GAAoC,IAApC,GAA2C,KAA7E;AACD,OAHc,EAAjB;AAII;;AAEJ,QAAI,CAACtC,MAAM,GAAGC,UAAT,CAAoBsC,WAAzB,EAAsC;AACpCvC,YAAM,GAAGC,UAAT,CAAoBsC,WAApB,GAAkCR,EAAE,CAACS,yBAAH,EAAlC;AACD;AACF,GAlDY;;AAoDb;;;AAGAC,SAAO,EAAE,mBAAY;AACnBZ,WAAO,CAACC,GAAR,CAAY,SAAZ;AACA,SAAKY,UAAL,GAAkB,KAAKC,eAAL,CAAqB,OAArB,CAAlB;AACA,SAAKC,YAAL,GAAoBb,EAAE,CAACc,kBAAH,CAAsB,SAAtB,CAApB;AACD,GA3DY;;AA6Db;;;AAGAC,QAAM,EAAE,kBAAY;AAClB,QAAIC,IAAI,GAAG,IAAX;AACA,SAAKH,YAAL,GAAoBb,EAAE,CAACc,kBAAH,CAAsB,SAAtB,CAApB;;AAEA,SAAKD,YAAL,CAAkBI,QAAlB,GAA6B,YAAM;AACjCD,UAAI,CAACE,OAAL,CAAa;AACX5B,oBAAY,EAAE,IADH,EAAb;;AAGD,KAJD;;AAMAU,MAAE,CAACmB,WAAH;AACA,SAAKC,QAAL;;AAEA,QAAInD,MAAM,GAAGC,UAAT,CAAoBmD,kBAAxB,EAA4C;AAC1C,WAAKH,OAAL,CAAa;AACXxC,mBAAW,EAAE,KADF;AAEXI,aAAK,EAAE,IAFI,EAAb;;AAIA,WAAK+B,YAAL,CAAkBS,IAAlB;AACD;;AAED,KArBkB,CAqBhB;;AAEF,QAAIC,UAAU,GAAGzD,IAAI,CAAC0D,eAAL,EAAjB;;AAEA,QAAID,UAAU,IAAItD,MAAM,GAAGC,UAAT,CAAoBuD,eAApB,IAAuC,IAAzD,EAA+D;AAC7D,WAAKP,OAAL,CAAa;AACXvC,uBAAe,EAAE,KADN;AAEXE,sBAAc,EAAEZ,MAAM,GAAGC,UAAT,CAAoBwD,oBAApB,CAAyCC,MAAzC,GAAkD,CAAlD,GAAsD1D,MAAM,GAAGC,UAAT,CAAoBwD,oBAA1E,GAAiGH,UAAU,CAACK,KAFjH,EAAb;;;AAKA,UAAI3D,MAAM,GAAGC,UAAT,CAAoBuD,eAAxB,EAAyC;AACvC,aAAKP,OAAL,CAAa;AACXtC,sBAAY,EAAE,IADH,EAAb;;AAGD,OAJD,MAIO;AACL,aAAKsC,OAAL,CAAa;AACXtC,sBAAY,EAAE,KADH,EAAb;;AAGD;AACF;;AAED,SAAKiD,YAAL;AACD,GA3GY;;AA6Gb;;;AAGAC,QAAM,EAAE,kBAAY;AAClB,SAAKjB,YAAL,CAAkBkB,KAAlB;AACA,SAAKlB,YAAL,CAAkBS,IAAlB;AACA,SAAKJ,OAAL,CAAa;AACX5B,kBAAY,EAAE,KADH;AAEXZ,iBAAW,EAAE,KAFF;AAGXI,WAAK,EAAE,IAHI,EAAb;;AAKAgB,WAAO,CAACC,GAAR,CAAY,QAAZ;AACD,GAzHY;;AA2Hb;;;AAGAiC,UAAQ,EAAE,oBAAY;AACpB,SAAKd,OAAL,CAAa;AACX5B,kBAAY,EAAE,KADH,EAAb;;AAGA,SAAKuB,YAAL,CAAkBS,IAAlB;AACAxB,WAAO,CAACC,GAAR,CAAY,WAAZ;AACD,GApIY;;AAsIb;;;AAGAkC,mBAAiB,EAAE,6BAAY;AAC7B,WAAO;AACL7C,WAAK,EAAE,QADF;AAEL8C,UAAI,EAAE,oBAFD,EAAP;;AAID,GA9IY;AA+IbC,SAAO,EAAE;AACPf,YAAQ,EAAE,oBAAY;AACpB,UAAIJ,IAAI,GAAG,IAAX;AACAlD,UAAI,CAACsE,UAAL,CAAgBjE,OAAhB,EAAyB,EAAzB,EAA6B,UAAUiC,GAAV,EAAe;AAC1C,YAAIA,GAAG,CAAC/B,IAAJ,CAASgE,CAAT,IAAc,MAAlB,EAA0B;AACxBrC,YAAE,CAACsC,SAAH,CAAa;AACXlD,iBAAK,EAAE,WADI;AAEXmD,gBAAI,EAAE,MAFK,EAAb;;AAID,SALD,MAKO;AACLvB,cAAI,CAACE,OAAL,CAAa;AACX5C,kBAAM,EAAE8B,GAAG,CAAC/B,IAAJ,CAASA,IADN,EAAb;;AAGD,SAVyC,CAUxC;;AAEH,OAZD;AAaD,KAhBM;AAiBP;AACAmE,cAAU,EAAE,oBAAUC,KAAV,EAAiB;AAC3B,UAAIC,EAAE,GAAGD,KAAK,CAACE,aAAN,CAAoBC,OAApB,CAA4BF,EAArC;AACA,WAAKxB,OAAL,CAAa;AACX7B,gBAAQ,EAAEqD,EADC,EAAb;;AAGD,KAvBM;AAwBP;AACAG,kBAAc,EAAE,0BAAY;AAC1B/C,aAAO,CAACC,GAAR,CAAY,KAAZ;AACD,KA3BM;AA4BP;AACA+C,eAAW,EAAE,uBAAY;AACvBhD,aAAO,CAACC,GAAR,CAAY,MAAZ;AACD,KA/BM;AAgCPgD,YAAQ,EAAE,kBAAU3C,GAAV,EAAe;AACvBN,aAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBK,GAAtB;AACD,KAlCM;AAmCP4C,WAAO,EAAE,iBAAUP,KAAV,EAAiB;AACxB;AACA3C,aAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyC9B,MAAM,GAAGC,UAAT,CAAoB+E,UAA7D;;AAEA,UAAI,CAAChF,MAAM,GAAGC,UAAT,CAAoB+E,UAAzB,EAAqC;AACnCjD,UAAE,CAACkD,SAAH,CAAa;AACXC,aAAG,EAAE,cADM,EAAb;;AAGA;AACD;;AAED,UAAIA,GAAG,GAAGC,kBAAkB,CAACX,KAAK,CAACE,aAAN,CAAoBC,OAApB,CAA4BO,GAA7B,CAA5B;AACA,UAAIT,EAAE,GAAGD,KAAK,CAACE,aAAN,CAAoBC,OAApB,CAA4BF,EAArC;AACA,UAAIW,GAAG,GAAGZ,KAAK,CAACE,aAAN,CAAoBC,OAApB,CAA4BS,GAAtC;;AAEA,UAAIF,GAAG,CAACxB,MAAJ,IAAc,CAAlB,EAAqB;AACnB3B,UAAE,CAACsC,SAAH,CAAa;AACXlD,eAAK,EAAE,QADI;AAEXmD,cAAI,EAAE,MAFK,EAAb;;AAIA;AACD;;AAED,UAAIc,GAAG,IAAI,CAAX,EAAc;AACZ,aAAKnC,OAAL,CAAa;AACXxC,qBAAW,EAAE,KADF,EAAb;;AAGA,aAAKmC,YAAL,CAAkBkB,KAAlB;AACD;;AAED,UAAI,KAAKzD,MAAL,CAAY+E,GAAZ,EAAiB,cAAjB,KAAoC,IAAxC,EAA8C;AAC5C;AACD;;AAEDpF,YAAM,GAAGC,UAAT,CAAoBoF,mBAApB,GAA0CD,GAA1C;AACArD,QAAE,CAACuD,UAAH,CAAc;AACZJ,WAAG,EAAE,mCAAmCA,GAAnC,GAAyC,MAAzC,GAAkDT,EAD3C,EAAd;;AAGD,KAzEM;AA0EP;AACAc,aAAS,EAAE,mBAAUf,KAAV,EAAiB;AAC1B,UAAIzB,IAAI,GAAG,IAAX;AACA,WAAKE,OAAL,CAAa;AACXxC,mBAAW,EAAE,IADF;AAEXY,oBAAY,EAAE,IAFH;AAGXR,aAAK,EAAE,KAHI;AAIXS,iBAAS,EAAE,IAJA,CAIK;AAJL,OAAb;;AAOA,WAAKsB,YAAL,CAAkB4C,IAAlB;AACAxF,YAAM,GAAGC,UAAT,CAAoBmD,kBAApB,GAAyC,KAAzC;;AAEA,UAAIpD,MAAM,GAAGC,UAAT,CAAoBuD,eAAxB,EAAyC;AACvC,aAAKP,OAAL,CAAa;AACXtC,sBAAY,EAAE,KADH,EAAb;;AAGAX,cAAM,GAAGC,UAAT,CAAoBsC,WAApB,CAAgCuB,KAAhC;AACD;;AAED2B,gBAAU,CAAC,YAAY;AACrB1C,YAAI,CAACH,YAAL,CAAkB4C,IAAlB;AACD,OAFS,EAEP,IAFO,CAAV;AAGA3D,aAAO,CAACC,GAAR,CAAY,YAAZ;AACD,KAlGM;AAmGP;AACA4D,cAAU,EAAE,oBAAUtB,CAAV,EAAa;AACvBvC,aAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBsC,CAAtB;AACA,WAAKnB,OAAL,CAAa;AACX5B,oBAAY,EAAE,KADH,EAAb;AAEI;AACL,KAzGM;AA0GP;AACAuC,gBAAY,EAAE,wBAAY;AACxB,UAAI+B,SAAJ;AACIC,cAAQ,GAAG,CADf;AAEA,UAAIC,QAAQ,GAAGC,IAAI,CAACC,GAAL,EAAf;AACAhE,QAAE,CAACiE,kBAAH;AACAjE,QAAE,CAACkE,qBAAH,CAAyB,UAAA9D,GAAG,EAAI;AAC9B,YAAM4D,GAAG,GAAGD,IAAI,CAACC,GAAL,EAAZ,CAD8B,CACN;;AAExB,YAAIA,GAAG,GAAGF,QAAN,GAAiB,GAArB,EAA0B;AACxB;AACD;;AAEDA,gBAAQ,GAAGE,GAAX;AACA,YAAIH,QAAJ,CAR8B,CAQhB;;AAEd,YAAMM,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAW,CAACjE,GAAG,CAACkE,CAAhB,EAAmBF,IAAI,CAACG,IAAL,CAAUnE,GAAG,CAACoE,CAAJ,GAAQpE,GAAG,CAACoE,CAAZ,GAAgBpE,GAAG,CAACqE,CAAJ,GAAQrE,GAAG,CAACqE,CAAtC,CAAnB,IAA+D,IAA5E;AACA,YAAMC,KAAK,GAAGN,IAAI,CAACC,KAAL,CAAWjE,GAAG,CAACoE,CAAf,EAAkBpE,GAAG,CAACqE,CAAtB,IAA2B,IAAzC,CAX8B,CAWiB;;AAE/C,YAAIN,IAAI,GAAG,EAAX,EAAe;AACb,cAAIO,KAAK,GAAG,CAAC,GAAT,IAAgBA,KAAK,GAAG,CAAC,EAAzB,IAA+BA,KAAK,GAAG,GAA3C,EAAgD;AAC9Cb,oBAAQ,GAAG,CAAX;AACD,WAFD,MAEO;AACLA,oBAAQ,GAAGD,SAAX;AACD;AACF,SAND,MAMO,IAAIO,IAAI,GAAG,CAAP,IAAYA,IAAI,GAAG,EAAnB,IAAyBA,IAAI,GAAG,CAAP,IAAYA,IAAI,GAAG,CAAC,EAAjD,EAAqD;AAC1D,cAAIQ,QAAQ,GAAGP,IAAI,CAACQ,GAAL,CAASF,KAAT,CAAf,CAD0D,CAC1B;;AAEhC,cAAIC,QAAQ,GAAG,GAAX,IAAkBA,QAAQ,GAAG,EAAjC,EAAqC;AACnCd,oBAAQ,GAAGD,SAAX;AACD,WAFD,MAEO,IAAIc,KAAK,GAAG,CAAZ,EAAe;AACpB;AACAb,oBAAQ,GAAG,CAAX;AACD,WAHM,MAGA;AACLA,oBAAQ,GAAGD,SAAX;AACD;AACF,SAXM,MAWA;AACLC,kBAAQ,GAAGD,SAAX;AACD,SAhC6B,CAgC5B;;;AAGF,YAAIC,QAAQ,KAAKD,SAAjB,EAA4B;AAC1BA,mBAAS,GAAGC,QAAZ;;AAEA,cAAIA,QAAQ,KAAK,CAAjB,EAAoB;AAClB,iBAAI,CAACvE,YAAL,GAAoB,KAAI,CAACuB,YAAL,CAAkBgE,iBAAlB,EAApB,GAA4D,IAA5D;AACA/E,mBAAO,CAACC,GAAR,CAAY,WAAZ;AACD,WAHD,MAGO;AACL,iBAAI,CAACc,YAAL,CAAkBiE,cAAlB;AACAhF,mBAAO,CAACC,GAAR,CAAY,WAAZ;AACD;AACF;AACF,OA9CD;AA+CD,KA/JM;AAgKP;AACAgF,eAAW,EAAE,uBAAY;AACvB,UAAI/D,IAAI,GAAG,IAAX,CADuB,CACN;;AAEjB,UAAImC,GAAG,GAAG/E,OAAO,GAAGN,IAAI,CAAC0D,eAAL,GAAuBwD,OAA3C;AACA/G,YAAM,GAAGC,UAAT,CAAoB+G,WAApB,GAAkCnH,IAAI,CAAC0D,eAAL,GAAuB0D,GAAzD;AACAjH,YAAM,GAAGC,UAAT,CAAoBiH,WAApB,GAAkCrH,IAAI,CAAC0D,eAAL,GAAuB6B,GAAzD;AACApF,YAAM,GAAGC,UAAT,CAAoBkH,cAApB,GAAqCtH,IAAI,CAAC0D,eAAL,GAAuB6D,IAA5D;AACApH,YAAM,GAAGC,UAAT,CAAoBoH,cAApB,GAAqCxH,IAAI,CAAC0D,eAAL,GAAuBwD,OAA5D;AACAlH,UAAI,CAACsE,UAAL,CAAgBe,GAAhB,EAAqB,EAArB,EAAyB,UAAU/C,GAAV,EAAe;AACtC,YAAIA,GAAG,CAAC/B,IAAJ,CAASgE,CAAT,IAAc,MAAlB,EAA0B;AACxBrC,YAAE,CAACsC,SAAH,CAAa;AACXlD,iBAAK,EAAE,WADI;AAEXmD,gBAAI,EAAE,MAFK,EAAb;;AAID,SALD,MAKO;AACLnC,aAAG,CAAC/B,IAAJ,CAASA,IAAT,CAAckH,GAAd,CAAkB,UAAAC,GAAG,UAAIA,GAAG,CAACC,KAAJ,GAAYC,IAAI,CAACC,KAAL,CAAW7H,IAAI,CAAC8H,MAAL,CAAYJ,GAAG,CAACK,KAAhB,EAAuBL,GAAG,CAACM,QAA3B,CAAX,CAAhB,EAArB;AACA7H,gBAAM,GAAGC,UAAT,CAAoB6H,UAApB,GAAiC3F,GAAG,CAAC/B,IAAJ,CAASoB,IAA1C;AACAxB,gBAAM,GAAGC,UAAT,CAAoB8H,YAApB,GAAmC5F,GAAG,CAAC/B,IAAJ,CAASoB,IAAT,CAAcwG,MAAd,IAAwB,CAAxB,GAA4B,KAA5B,GAAoC,IAAvE;AACAhI,gBAAM,GAAGC,UAAT,CAAoBgI,UAApB,GAAiC9F,GAAG,CAAC/B,IAAJ,CAASoB,IAAT,CAAc0G,QAA/C;AACAlI,gBAAM,GAAGC,UAAT,CAAoBkI,YAApB,GAAmChG,GAAG,CAAC/B,IAAJ,CAASA,IAAT,CAAcsD,MAAjD;AACA1D,gBAAM,GAAGC,UAAT,CAAoBmI,UAApB,GAAiCjG,GAAG,CAAC/B,IAAJ,CAASA,IAA1C,CANK,CAM2C;;AAEhD2B,YAAE,CAACuD,UAAH,CAAc;AACZJ,eAAG,EAAE,4CAA4CrF,IAAI,CAAC0D,eAAL,GAAuB0D,GAD5D,EAAd;;AAGD;AACF,OAlBD;AAmBD,KA5LM;AA6LP;AACAoB,YAAQ,EAAE,oBAAY;AACpBrI,YAAM,GAAGC,UAAT,CAAoBoF,mBAApB,GAA0CxF,IAAI,CAAC0D,eAAL,GAAuB+E,MAAvB,IAAiC,CAA3E,CADoB,CAC0D;;AAE9E,WAAKxB,WAAL;AACD,KAlMM;AAmMP;AACAyB,sBAAkB,EAAE,8BAAY;AAC9B,UAAIxF,IAAI,GAAG,IAAX,CAD8B,CACb;;AAEjB/C,YAAM,GAAGC,UAAT,CAAoBsC,WAApB,CAAgCiG,OAAhC,CAAwC,YAAY;AAClD3G,eAAO,CAACC,GAAR,CAAY,UAAZ;AACD,OAFD,EAH8B,CAK1B;;AAEJ9B,YAAM,GAAGC,UAAT,CAAoBsC,WAApB,CAAgCkG,MAAhC,CAAuC,YAAY;AACjD1F,YAAI,CAACE,OAAL,CAAa;AACXtC,sBAAY,EAAE,IADH,EAAb;;AAGAkB,eAAO,CAACC,GAAR,CAAY,SAAZ;AACD,OALD,EAP8B,CAY1B;;AAEJ9B,YAAM,GAAGC,UAAT,CAAoBsC,WAApB,CAAgCmG,OAAhC,CAAwC,YAAY;AAClD3F,YAAI,CAACE,OAAL,CAAa;AACXtC,sBAAY,EAAE,KADH,EAAb;;AAGAkB,eAAO,CAACC,GAAR,CAAY,UAAZ;AACD,OALD;AAMA9B,YAAM,GAAGC,UAAT,CAAoBsC,WAApB,CAAgCoG,OAAhC,CAAwC,YAAY;AAClD5F,YAAI,CAACE,OAAL,CAAa;AACXtC,sBAAY,EAAE,KADH,EAAb;;AAGAkB,eAAO,CAACC,GAAR,CAAY,UAAZ;AACD,OALD;AAMA9B,YAAM,GAAGC,UAAT,CAAoBsC,WAApB,CAAgCqG,MAAhC,CAAuC,YAAY;AACjD7F,YAAI,CAACE,OAAL,CAAa;AACXtC,sBAAY,EAAE,KADH,EAAb;;AAGAkB,eAAO,CAACC,GAAR,CAAY,SAAZ;AACD,OALD;AAMD,KApOM,EA/II,E;;;;;;;;;;;;AChDf;AAAA;AAAA;AAAA;AAAsoC,CAAgB,gmCAAG,EAAC,C;;;;;;;;;;ACA1pC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/ablum/ablum.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/ablum/ablum.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./ablum.vue?vue&type=template&id=62878316&\"\nvar renderjs\nimport script from \"./ablum.vue?vue&type=script&lang=js&\"\nexport * from \"./ablum.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ablum.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/bing/lhbWordMiniProgram_uni/pages/ablum/ablum.vue\"\nexport default component.exports","export * from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ablum.vue?vue&type=template&id=62878316&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ablum.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ablum.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar util = require(\"../../utils/util\");\nconst app = getApp().globalData;\nvar listUrl = 'https://v.guixue.com/ApiWordCourse/list';\nvar unitUrl = \"https://v.xueweigui.com/ApiWordCourse/unitList?book_id=\";\nimport auth from \"../../component/easyModal/auth/auth\";\nimport navBar from \"../../component/nav-bar/nav-bar\";\n\nexport default {\n  data() {\n    return {\n      albums: [],\n      is_oauth: true,\n      win_height: getApp().globalData.g_win_height,\n      coverHidden: false,\n      playFloatHidden: true,\n      playFloating: false,\n      playFloatCover: '',\n      muted: false,\n      //是否静音播放\n      oauth_cfg: {\n        oauthTipName: '为了更好的体验\\n需要您的授权\\n(• ̀ω•́ )✧',\n        oauthButtonName: '好的'\n      },\n      nvabarData: {\n        showCapsule: 0,\n        // 是否显示左上角胶囊按钮 1 显示 0 不显示\n        title: '刘洪波讲单词'\n      },\n      selectId: \"\",\n      videoPlaying: false,\n      coverPlay: false\n    };\n  },\n\n  components: {\n    auth,\n    navBar\n  },\n  props: {},\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    console.log('onload');\n    wx.showLoading({\n      title: '加载中...'\n    });\n    wx.getSystemInfo({\n      success: function (res) {\n        getApp().globalData.g_is_huawei = res.model.indexOf('HUAWEI') != -1 ? true : false;\n      }\n    }); //判断是播放视频or 音频\n\n    if (!getApp().globalData.g_audio_obj) {\n      getApp().globalData.g_audio_obj = wx.getBackgroundAudioManager();\n    }\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n    console.log('onReady');\n    this.oauthModal = this.selectComponent(\"#auth\");\n    this.videoContext = wx.createVideoContext('myVideo');\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    let that = this;\n    this.videoContext = wx.createVideoContext('myVideo');\n\n    this.videoContext.bindplay = () => {\n      that.setData({\n        videoPlaying: true\n      });\n    };\n\n    wx.hideLoading();\n    this.dataLoad();\n\n    if (getApp().globalData.g_has_index_toggle) {\n      this.setData({\n        coverHidden: false,\n        muted: true\n      });\n      this.videoContext.stop();\n    }\n\n    ; //浮动播放\n\n    var playRecord = util.getListenRecord();\n\n    if (playRecord || getApp().globalData.g_audio_playing != null) {\n      this.setData({\n        playFloatHidden: false,\n        playFloatCover: getApp().globalData.g_audio_cover_square.length > 0 ? getApp().globalData.g_audio_cover_square : playRecord.cover\n      });\n\n      if (getApp().globalData.g_audio_playing) {\n        this.setData({\n          playFloating: true\n        });\n      } else {\n        this.setData({\n          playFloating: false\n        });\n      }\n    }\n\n    this.screenResize();\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n    this.videoContext.pause();\n    this.videoContext.stop();\n    this.setData({\n      videoPlaying: false,\n      coverHidden: false,\n      muted: true\n    });\n    console.log('onHide');\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n    this.setData({\n      videoPlaying: false\n    });\n    this.videoContext.stop();\n    console.log('on unload');\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n    return {\n      title: '刘洪波讲单词',\n      path: '/pages/ablum/ablum'\n    };\n  },\n  methods: {\n    dataLoad: function () {\n      var that = this;\n      util.getRequest(listUrl, {}, function (res) {\n        if (res.data.e != '9999') {\n          wx.showToast({\n            title: '网络繁忙,稍后重试',\n            icon: 'none'\n          });\n        } else {\n          that.setData({\n            albums: res.data.data\n          });\n        } //console.log(that.data.albums);\n\n      });\n    },\n    //当前点击ablum事件\n    clickAblum: function (event) {\n      let id = event.currentTarget.dataset.id;\n      this.setData({\n        selectId: id\n      });\n    },\n    //授权失败 \n    oauthFailEvent: function () {\n      console.log('未授权');\n    },\n    //绑定成功\n    bindOkEvent: function () {\n      console.log('绑定成功');\n    },\n    onResize: function (res) {\n      console.log('屏幕方向旋转', res);\n    },\n    goAlbum: function (event) {\n      //已授权且登录\n      console.log('app.globalData.g_is_login', getApp().globalData.g_is_login);\n\n      if (!getApp().globalData.g_is_login) {\n        wx.switchTab({\n          url: '/pages/my/my'\n        });\n        return;\n      }\n\n      let url = encodeURIComponent(event.currentTarget.dataset.url);\n      let id = event.currentTarget.dataset.id;\n      let idx = event.currentTarget.dataset.idx;\n\n      if (url.length == 0) {\n        wx.showToast({\n          title: '详情地址错误',\n          icon: \"none\"\n        });\n        return;\n      }\n\n      if (idx != 0) {\n        this.setData({\n          coverHidden: false\n        });\n        this.videoContext.pause();\n      }\n\n      if (this.albums[idx]['product_type'] == 7010) {\n        return;\n      }\n\n      getApp().globalData.g_audio_ablum_temid = idx;\n      wx.navigateTo({\n        url: '/pages/ablum/ablum-detail?url=' + url + '&id=' + id\n      });\n    },\n    //播放视频触发\n    videoPlay: function (event) {\n      var that = this;\n      this.setData({\n        coverHidden: true,\n        videoPlaying: true,\n        muted: false,\n        coverPlay: true //观看试播放\n\n      });\n      this.videoContext.play();\n      getApp().globalData.g_has_index_toggle = false;\n\n      if (getApp().globalData.g_audio_playing) {\n        this.setData({\n          playFloating: false\n        });\n        getApp().globalData.g_audio_obj.pause();\n      }\n\n      setTimeout(function () {\n        that.videoContext.play();\n      }, 1000);\n      console.log('play video');\n    },\n    //暂停视频触发\n    videoPause: function (e) {\n      console.log('暂停视频触发', e);\n      this.setData({\n        videoPlaying: false\n      }); // this.videoContext.pause();\n    },\n    //判断横竖屏\n    screenResize: function () {\n      var lastState,\n          nowState = 0;\n      let lastTime = Date.now();\n      wx.startAccelerometer();\n      wx.onAccelerometerChange(res => {\n        const now = Date.now(); // 500ms检测一次\n\n        if (now - lastTime < 500) {\n          return;\n        }\n\n        lastTime = now;\n        let nowState; // 57.3 = 180 / Math.PI\n\n        const Roll = Math.atan2(-res.x, Math.sqrt(res.y * res.y + res.z * res.z)) * 57.3;\n        const Pitch = Math.atan2(res.y, res.z) * 57.3; // 横屏状态\n\n        if (Roll > 50) {\n          if (Pitch > -180 && Pitch < -60 || Pitch > 130) {\n            nowState = 1;\n          } else {\n            nowState = lastState;\n          }\n        } else if (Roll > 0 && Roll < 30 || Roll < 0 && Roll > -30) {\n          let absPitch = Math.abs(Pitch); // 如果手机平躺，保持原状态不变，40容错率\n\n          if (absPitch > 140 || absPitch < 40) {\n            nowState = lastState;\n          } else if (Pitch < 0) {\n            /*收集竖向正立的情况*/\n            nowState = 0;\n          } else {\n            nowState = lastState;\n          }\n        } else {\n          nowState = lastState;\n        } // 状态变化时，触发\n\n\n        if (nowState !== lastState) {\n          lastState = nowState;\n\n          if (nowState === 1) {\n            this.videoPlaying ? this.videoContext.requestFullScreen() : null;\n            console.log('change:横屏');\n          } else {\n            this.videoContext.exitFullScreen();\n            console.log('change:竖屏');\n          }\n        }\n      });\n    },\n    //直接跳详情请求数据\n    reqBookData: function () {\n      var that = this; //console.log(util.getListenRecord().book_id, util.getListenRecord());\n\n      let url = unitUrl + util.getListenRecord().book_id;\n      getApp().globalData.g_audio_pid = util.getListenRecord().pid;\n      getApp().globalData.g_audio_idx = util.getListenRecord().idx;\n      getApp().globalData.g_audio_seeker = util.getListenRecord().time;\n      getApp().globalData.g_audio_bookid = util.getListenRecord().book_id;\n      util.getRequest(url, {}, function (res) {\n        if (res.data.e != '9999') {\n          wx.showToast({\n            title: '网络繁忙,稍后重试',\n            icon: 'none'\n          });\n        } else {\n          res.data.data.map(reg => reg.audio = JSON.parse(util.secret(reg.media, reg.media_iv)));\n          getApp().globalData.g_auth_msg = res.data.auth;\n          getApp().globalData.g_audio_auth = res.data.auth.status == 0 ? false : true;\n          getApp().globalData.g_try_time = res.data.auth.try_time;\n          getApp().globalData.g_audio_plen = res.data.data.length;\n          getApp().globalData.g_req_data = res.data.data; //console.log(res);\n\n          wx.navigateTo({\n            url: '/pages/ablum/ablum-content?float=1&pid=' + util.getListenRecord().pid\n          });\n        }\n      });\n    },\n    //进入收听详情\n    goDetail: function () {\n      getApp().globalData.g_audio_ablum_temid = util.getListenRecord().tmp_id || 0; //console.log('go-detail--', util.getListenRecord(),util.getListenRecord().tmp_id);\n\n      this.reqBookData();\n    },\n    //监听操作\n    audioManagerLister: function () {\n      var that = this; //监听背景音频播放错误事件\n\n      getApp().globalData.g_audio_obj.onError(function () {\n        console.log('onError0');\n      }); //监听背景音频播放事件\n\n      getApp().globalData.g_audio_obj.onPlay(function () {\n        that.setData({\n          playFloating: true\n        });\n        console.log('onPlay0');\n      }); //监听背景音频暂停事件\n\n      getApp().globalData.g_audio_obj.onPause(function () {\n        that.setData({\n          playFloating: false\n        });\n        console.log('onPause0');\n      });\n      getApp().globalData.g_audio_obj.onEnded(function () {\n        that.setData({\n          playFloating: false\n        });\n        console.log('onEnded0');\n      });\n      getApp().globalData.g_audio_obj.onStop(function () {\n        that.setData({\n          playFloating: false\n        });\n        console.log('onStop0');\n      });\n    }\n  }\n};\n","import mod from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ablum.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ablum.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588747021550\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}